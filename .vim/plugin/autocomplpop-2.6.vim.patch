--- autocomplpop.vim	2009-07-13 01:46:52.000000000 -0500
+++ autocomplpop.vim.modified	2009-07-13 12:03:00.000000000 -0500
@@ -277,15 +277,16 @@
     autocmd InsertLeave * call s:PopupFeeder.finish()
   augroup END
 
+  nnoremap <silent> i i<C-r>=<SID>GetPopupFeeder().feed()<CR>
+  nnoremap <silent> a a<C-r>=<SID>GetPopupFeeder().feed()<CR>
+  nnoremap <silent> R R<C-r>=<SID>GetPopupFeeder().feed()<CR>
+
   if g:AutoComplPop_MappingDriven
     call s:FeedMapping.map()
   else
     autocmd AutoComplPopGlobalAutoCommand CursorMovedI * call s:PopupFeeder.feed()
   endif
 
-  nnoremap <silent> i i<C-r>=<SID>GetPopupFeeder().feed()<CR>
-  nnoremap <silent> a a<C-r>=<SID>GetPopupFeeder().feed()<CR>
-  nnoremap <silent> R R<C-r>=<SID>GetPopupFeeder().feed()<CR>
 endfunction
 
 "-----------------------------------------------------------------------------
@@ -322,6 +323,15 @@
     endfor
   endif
 
+  "Add support for snippMate.vim
+  if g:AutoComplPop_BehaviorKeywordLength >= 0
+    for key in keys(behavs)
+       call add(behavs[key], {
+            \   'command'  : "\<C-r>\<Tab>",
+            \   'pattern'  : printf('\k\{%d,}$', g:AutoComplPop_BehaviorKeywordLength),
+            \   'repeat'   : 0,
+            \ })
+
   if g:AutoComplPop_BehaviorFileLength >= 0
     for key in keys(behavs)
       call add(behavs[key], {
@@ -430,6 +440,7 @@
 
   " use <Plug> for silence instead of <C-r>=
   call feedkeys(self.behavs[0].command . "\<Plug>AutocomplpopOnPopupPost", 'm')
+  call feedkeys(self.behavs[0].command . "\<Plug>ShowAvailableSnips", 'm')
   return '' " for <C-r>=
 endfunction
 
@@ -516,6 +527,10 @@
     execute printf('inoremap <silent> %s %s<C-r>=<SID>GetPopupFeeder().feed()<CR>',
           \        key, key)
   endfor
+ 
+  nnoremap i <Nop> | nunmap i
+  nnoremap a <Nop> | nunmap a
+  nnoremap R <Nop> | nunmap R
 endfunction
 
 "-----------------------------------------------------------------------------
@@ -596,6 +611,7 @@
 command! -bar -narg=0 AutoComplPopUnlock  call s:PopupFeeder.unlock()
 
 inoremap <silent> <expr> <Plug>AutocomplpopOnPopupPost <SID>GetPopupFeeder().on_popup_post()
+inoremap <silent> <expr> <Plug>ShowAvailableSnips ShowAvailableSnips()
 
 if !g:AutoComplPop_NotEnableAtStartup
   AutoComplPopEnable
